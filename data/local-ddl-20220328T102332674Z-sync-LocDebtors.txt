CREATE TABLE TBL_DB_DEBTOR_TYPE (DEBTOR_TYPE_ID serial,CODE VARCHAR(30) NOT NULL ,NAME VARCHAR(100) NOT NULL ,DESCRIPTION VARCHAR(150) NOT NULL ,DISABLED BOOLEAN NOT NULL ,CONSTRAINT TBL_DB_DEBTOR_TYPE_PK PRIMARY KEY (DEBTOR_TYPE_ID),CONSTRAINT TBL_DB_DEBTOR_TYPE_UK UNIQUE (CODE));
CREATE TABLE TBL_DB_PAYMENT_METHOD_TYPE (PMT_RESP_PAYMENT_METHOD_ID serial,CODE VARCHAR(50) NOT NULL ,NAME VARCHAR(100) NOT NULL ,DESCRIPTION VARCHAR(150)  ,DISABLED BOOLEAN NOT NULL ,AUTO_PAY BOOLEAN  ,CONSTRAINT TBL_DB_PAYMENT_METHOD_TYPE_PK PRIMARY KEY (PMT_RESP_PAYMENT_METHOD_ID),CONSTRAINT TBL_DB_PAYMENT_METHOD_TYPE_UK UNIQUE (CODE));
CREATE TABLE TBL_DB_DEBTOR_STAGE (DEBTOR_STAGE_ID serial,CODE VARCHAR(50) NOT NULL ,NAME VARCHAR(100) NOT NULL ,DESCRIPTION VARCHAR(150) NOT NULL ,COLOR VARCHAR(30) NOT NULL ,STAGE_POSITION INTEGER  ,DISABLED BOOLEAN NOT NULL ,CONSTRAINT TBL_DB_DEBTOR_STAGE_PK PRIMARY KEY (DEBTOR_STAGE_ID),CONSTRAINT TBL_DB_DEBTOR_STAGE_UK UNIQUE (CODE));
CREATE TABLE TBL_SRB_REFERENCE (REFERENCE_ID serial,REF_TYPE VARCHAR(50) NOT NULL ,REF_ID VARCHAR(100) NOT NULL ,NAME VARCHAR(200)  ,CONSTRAINT TBL_SRB_REFERENCE_PK PRIMARY KEY (REFERENCE_ID));
CREATE TABLE TBL_DB_DEBTOR (DEBTOR_ID serial,DEBTOR_NUMBER VARCHAR(50) NOT NULL ,NAME VARCHAR(200) NOT NULL ,PARTY_ROLE_REF_ID INTEGER  ,DEBTOR_STATUS_ID INTEGER  ,PARTY_REF_ID INTEGER  ,MAIN_ACCOUNT_REF_ID INTEGER  ,STAGE_ID INTEGER  ,DEBTOR_TYPE_ID INTEGER  ,REFERENCE_NUMBER VARCHAR(50) NOT NULL ,LAST_MODIFICATION_DATE TIMESTAMP  ,REGISTRATION_DATE TIMESTAMP  ,IDENTIFICATION_VALUE VARCHAR(80)  ,IDENTIFICATION_TYPE VARCHAR(30)  ,ADDITIONAL_INFO_1 VARCHAR(150)  ,ADDITIONAL_INFO_2 VARCHAR(150)  ,ADDITIONAL_INFO_3 VARCHAR(150)  ,CONSTRAINT TBL_DB_DEBTOR_PK PRIMARY KEY (DEBTOR_ID));
CREATE TABLE TBL_DB_DEBTOR_STATUS_HISTORY (DEBTOR_STATUS_HISTORY_ID serial,DEBTOR_STATUS INTEGER NOT NULL ,REGISTRATION_DATE TIMESTAMP NOT NULL ,USER_REF_ID INTEGER NOT NULL ,REASON VARCHAR(50) NOT NULL ,REMARKS VARCHAR(250)  ,DEBTOR_ID INTEGER NOT NULL ,CONSTRAINT TBL_DB_DEBTOR_STATUS_HISTORY_PK PRIMARY KEY (DEBTOR_STATUS_HISTORY_ID));
CREATE TABLE TBL_DB_PAYMENT_RESPONSIBLE (PAYMENT_RESPONSIBLE_ID serial,NAME VARCHAR(150) NOT NULL ,REFERENCE_NUMBER VARCHAR(50)  ,CONSTRAINT TBL_DB_PAYMENT_RESPONSIBLE_PK PRIMARY KEY (PAYMENT_RESPONSIBLE_ID));
CREATE TABLE TBL_DB_PMT_RESP_PAYMENT_METHOD (PMT_RESP_PAYMENT_METHOD_ID serial,PMT_METHOD_STATUS INTEGER NOT NULL ,PAYMENT_METHOD_TYPE_ID INTEGER NOT NULL ,PAYMENT_RESPONSIBLE_ID INTEGER NOT NULL ,BANK_ID INTEGER  ,CARD_NUMBER VARCHAR(20)  ,CARD_NAME VARCHAR(100)  ,CARD_EXP_YEAR INTEGER  ,CARD_EXP_MONTH INTEGER  ,CONSTRAINT TBL_DB_PMT_RESP_PAYMENT_METHOD_PK PRIMARY KEY (PMT_RESP_PAYMENT_METHOD_ID));
CREATE TABLE TBL_DB_DEBTOR_ACCOUNT (DEBTOR_ACCOUNT_ID serial,ACCOUNT_NUMBER VARCHAR(50) NOT NULL ,NAME VARCHAR(150)  ,DEBTOR_ID INTEGER NOT NULL ,ACTUAL_PAST_DUE INTEGER  ,WRITE_OFF INTEGER  ,SECURITIZED INTEGER  ,UNBILLED INTEGER  ,PROVIDER_ID INTEGER  ,ACCOUNT_LEDGER_REF_ID INTEGER  ,LAST_MODIFICATION_DATE TIMESTAMP  ,REFERENCE_NUMBER VARCHAR(50)  ,ACCOUNT_STATUS_ID INTEGER  ,REGISTRATION_DATE TIMESTAMP  ,ARRANGED DECIMAL(10,4)  ,UNEXPIRED DECIMAL(10,4)  ,CURRENCY_REF_ID INTEGER  ,ACTIVE_SEGMENT_ID INTEGER  ,CONSTRAINT TBL_DB_DEBTOR_ACCOUNT_PK PRIMARY KEY (DEBTOR_ACCOUNT_ID),CONSTRAINT TBL_DB_DEBTOR_ACCOUNT_UK UNIQUE (ACCOUNT_NUMBER));
CREATE TABLE TBL_DB_ACCOUNT_PAYMENT_RESP (ACCOUNT_PAYMENT_RESP_ID serial,DEBTOR_ACCOUNT_ID INTEGER NOT NULL ,PAYMENT_RESPONSIBLE_ID INTEGER NOT NULL ,LOC_ADDRESS_REF_ID INTEGER NOT NULL ,IS_MAIN BOOLEAN  ,PAYMENT_METHOD_REF_ID INTEGER NOT NULL ,CONSTRAINT TBL_DB_ACCOUNT_PAYMENT_RESP_PK PRIMARY KEY (ACCOUNT_PAYMENT_RESP_ID));
CREATE TABLE TBL_DB_ACCOUNT_SERVICE (ACCOUNT_SERVICE_ID serial,NAME VARCHAR(150) NOT NULL ,REFERENCE_NUMBER VARCHAR(45) NOT NULL ,ACCOUNT_ID INTEGER NOT NULL ,SERIAL_NUMBER VARCHAR(50)  ,REGISTRATION_DATE TIMESTAMP  ,ACTIVATION_DATE TIMESTAMP  ,DEACTIVATION_DATE TIMESTAMP  ,CONTRACT_NUMBER VARCHAR(50)  ,SERVICE_EXTERNAL_CODE VARCHAR(150)  ,PRODUCT_LINE VARCHAR(50)  ,SUB_TYPE VARCHAR(50)  ,CONSTRAINT TBL_DB_ACCOUNT_SERVICE_PK PRIMARY KEY (ACCOUNT_SERVICE_ID));
CREATE TABLE TBL_DB_ACCOUNT_STATUS_HISTORY (ACCOUNT_STATUS_HISTORY_ID serial,ACCOUNT_STATUS INTEGER NOT NULL ,REGISTRATION_DATE TIMESTAMP NOT NULL ,USER_REF_ID INTEGER NOT NULL ,IS_ACTIVE BOOLEAN  ,REASON VARCHAR(50)  ,REMARKS VARCHAR(250) NOT NULL ,ACCOUNT_ID INTEGER NOT NULL ,CONSTRAINT TBL_DB_ACCOUNT_STATUS_HISTORY_PK PRIMARY KEY (ACCOUNT_STATUS_HISTORY_ID));
ALTER TABLE TBL_DB_DEBTOR ADD CONSTRAINT TBL_DB_DEBTOR_partyRoleRef_FK FOREIGN KEY (PARTY_ROLE_REF_ID) REFERENCES TBL_SRB_REFERENCE (REFERENCE_ID);
ALTER TABLE TBL_DB_DEBTOR_STATUS_HISTORY ADD CONSTRAINT TBL_DB_DEBTOR_STATUS_HISTORY_userRef_FK FOREIGN KEY (USER_REF_ID) REFERENCES TBL_SRB_REFERENCE (REFERENCE_ID);
ALTER TABLE TBL_DB_DEBTOR_STATUS_HISTORY ADD CONSTRAINT TBL_DB_DEBTOR_STATUS_HISTORY_debtor_FK FOREIGN KEY (DEBTOR_ID) REFERENCES TBL_DB_DEBTOR (DEBTOR_ID);
ALTER TABLE TBL_DB_DEBTOR_ACCOUNT ADD CONSTRAINT TBL_DB_DEBTOR_ACCOUNT_debtor_FK FOREIGN KEY (DEBTOR_ID) REFERENCES TBL_DB_DEBTOR (DEBTOR_ID);
ALTER TABLE TBL_DB_DEBTOR_ACCOUNT ADD CONSTRAINT TBL_DB_DEBTOR_ACCOUNT_accountLedgerRef_FK FOREIGN KEY (ACCOUNT_LEDGER_REF_ID) REFERENCES TBL_SRB_REFERENCE (REFERENCE_ID);
ALTER TABLE TBL_DB_ACCOUNT_SERVICE ADD CONSTRAINT TBL_DB_ACCOUNT_SERVICE_account_FK FOREIGN KEY (ACCOUNT_ID) REFERENCES TBL_DB_DEBTOR_ACCOUNT (DEBTOR_ACCOUNT_ID);